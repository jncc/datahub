
@page "/assets/{assetId}"
@model AssetModel

@using Datahub.Web.Models
@using Datahub.Web.Pages.Helpers

@{
    ViewData["Title"] = Model.Asset.Metadata.Title;
}
@{ ViewBag.CurrentPage = "Index"; }

@section Styles {
}

@section Scripts {
    <!-- <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script> -->
}
 
<div class="space-below show-for-medium">
    <!-- whitespace for when the "show-for-small-only" microsite name subtitile is hidden -->
</div>

<div class="container">

<div class="grid-x grid-margin-x">
    <div class="cell medium-expand small-order-1 medium-order-2 space-below">
        
        <!-- Title -->
        <h1 style="margin-bottom: 1rem;">
            <span style="color: #48A943; margin-right:0.3rem;">  
            <i class="fas @AssetHelpers.GetIconName(Model.Asset.Metadata.ResourceType)"
                data-toggle="tooltip" title="@Model.Asset.Metadata.ResourceType"></i>
            </span>
            <span style="margin-right: 0.1em;">@Model.Asset.Metadata.Title</span>
            <span class="text-small text-muted">@Model.Asset.Metadata.DatasetReferenceDate.Substring(0, 4)</span>
        </h1>

        <p>
            @foreach (var k in Model.Asset.Metadata.Keywords)
            {
                @await Html.PartialAsync("_Keyword", new Keyword { Vocab = k.Vocab, Value = k.Value })
            }
        </p>
        <div class="module">
            <p class="collapse" id="collapseExample" aria-expanded="false">
                <span class="text-label">Abstract</span> @Model.Asset.Metadata.Abstract
            </p>
            <div class="float-right">
                <a role="button" class="collapsed" data-toggle="collapse" href="#collapseExample" 
                    aria-expanded="false" aria-controls="collapseExample"></a>
            </div>
        </div>

    </div>
    <div class="cell medium-shrink small-order-2 medium-order-1 space-below">
        @{
            // support adding "img" to the querystring just to see what any page could look like with an image
            if (this.HttpContext.Request.Query["img"] != Microsoft.Extensions.Primitives.StringValues.Empty)
            {
                Model.Asset.Image = new Image { Url = "/images/example-cover-image.png" }; // use dummy image
            }
        }
        @if (Model.Asset.Image != null && Model.Asset.Image.Url.IsNotBlank())
        {
            <img src="@(Model.Asset.Image.Url)" class="asset-image" />
        }
    </div>
</div> <!-- grid -->

<!-- tabs -->
<div class="grid-x grid-margin-x">
    <div class="cell large-6">
        <ul class="tabs" data-tabs id="the-tabs">
            <li class="tabs-title is-active">
                <a href="#main-detail" aria-selected="true">
                    <i class="fas fa-asterisk"></i> Detail
                </a>
            </li>
            <li class="tabs-title">
                <a data-tabs-target="usage-detail" href="#usage-detail">
                    <i class="fas fa-utensils"></i> Usage
                </a>
            </li>
            <li class="tabs-title">
                <a data-tabs-target="meta-detail" href="#meta-detail">
                    <i class="fas fa-cog"></i> Meta
                </a>
            </li>
            <li class="tabs-title">
                <a data-tabs-target="extent-detail" href="#extent-detail">
                    <i class="fas fa-map-marker-alt"></i> Extent
                </a>
            </li>
        </ul>
        <div class="tabs-content space-below" data-tabs-content="the-tabs">
            <div class="tabs-panel is-active" id="main-detail">
                <p class="metadata-item">
                    <span class="text-label">Resource type</span>
                    @Model.Asset.Metadata.ResourceType.FirstCharToUpper()
                </p>

                <p class="metadata-item">
                    <span class="text-label">Topic category</span>
                    @Model.Asset.Metadata.TopicCategory.FirstCharToUpper()
                </p>

                <p class="metadata-item">
                    <span class="text-label">Reference date</span>
                    <span title="Dataset Reference Date" data-toggle="tooltip" data-placement="top">
                        @await Html.PartialAsync("_IsoDate", Model.Asset.Metadata.DatasetReferenceDate)
                    </span>
                </p>

                @if (Model.Asset.DigitalObjectIdentifier.IsNotBlank())
                {
                <p class="metadata-item">
                    <span class="text-label">DOI</span>
                    <span title="Digital Object Identifier" data-toggle="tooltip" data-placement="top">
                        @Model.Asset.DigitalObjectIdentifier
                    </span>
                </p>
                }

                @if (Model.Asset.Citation.IsNotBlank())
                {
                <p class="metadata-item">
                    <span class="text-label">Citation</span>
                    <br />
                    @Model.Asset.Citation
                </p>
                }

                @if (Model.Asset.Metadata.Lineage.IsNotBlank())
                {
                <p class="metadata-item">
                    <span class="text-label">Lineage</span>
                    <br />
                    @Model.Asset.Metadata.Lineage
                </p>
                }

                @if (Model.Asset.Metadata.AdditionalInformationSource.IsNotBlank())
                {
                <p class="metadata-item">
                    <span class="text-label">Additional information source</span>
                    <br />
                    @Model.Asset.Metadata.AdditionalInformationSource
                </p>
                }
            </div>
            <div class="tabs-panel" id="usage-detail">
                <p>Suspendisse dictum feugiat nisl ut dapibus.  Vivamus hendrerit arcu sed erat molestie vehicula. Ut in nulla enim. Phasellus molestie magna non est bibendum non venenatis nisl tempor.  Sed auctor neque eu tellus rhoncus ut eleifend nibh porttitor.</p>
            </div>
            <div class="tabs-panel" id="meta-detail">
                <p>Suspendisse dictum feugiat nisl ut dapibus.  Vivamus hendrerit arcu sed erat molestie vehicula. Ut in nulla enim. Phasellus molestie magna non est bibendum non venenatis nisl tempor.  Sed auctor neque eu tellus rhoncus ut eleifend nibh porttitor.</p>
            </div>
            <div class="tabs-panel" id="extent-detail">
                <p>Suspendisse dictum feugiat nisl ut dapibus.  Vivamus hendrerit arcu sed erat molestie vehicula. Ut in nulla enim. Phasellus molestie magna non est bibendum non venenatis nisl tempor.  Sed auctor neque eu tellus rhoncus ut eleifend nibh porttitor.</p>
            </div>
        </div>
    </div>
    <div class="cell large-6">
        
    </div>
</div>



</div> <!-- container -->
